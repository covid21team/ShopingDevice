<!--
    ✔ Load ra toàn bộ sản phẩm theo loại mà khách hàng lựa chọn

    ✔ Có thể add sản phẩm vào giỏ hàng (nhưng không cập nhật lại trang nên thông số trên giỏ hành chưa thay đổi được)
        ✈ Khi khách hàng chưa đăng nhập ➔ sẽ thông báo chưa đăng nhập (Cách hiện thông báo nên xem lại)
        ✈ Khi khách hàng đăng nhập rồi ➔ có thể add vào giỏ hàng

    ✔ Khi bấm vào hình ảnh hoặc tên của sản phẩm thì có thể đi đến chi tiết sản phẩm

    ✔ Load được 5 sản phẩm top selling (Hiện tại thì chưa được mà chỉ đang load 5 sản phẩm đầu tiên)

    ✔ Bấm vào "Add To Cart" ➔ thêm vào giỏ hàng

    ✘ Bấm vào "Add To Wishlist" ➔ thêm vào danh sách yêu thích

    ✘ Chưa thực hiện được việc lọc sản phẩm theo yêu cầu

    ✹ Một số form share
        ➽ Categories_TableConfig
        ➽ Categories_LoadBrand
        ➽ Categories_LoadProductTop
        ➽ Public_RatingProduct

    ⛱ Form có thể đến
        ➣ Home
        ➣ Categories
        ➣ Product

    ☯ Key Session
        ➛ Session["ProductTypeName"]
-->

@model IEnumerable<TSP_Covid21.Models.ViewModel.ProductViewModel>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Categories";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



@{
    var db = new TSP_Covid21.Models.BUS.Product_BUS();
    var db_Ctrl = new TSP_Covid21.Controllers.ProductController();
    var ProductTypeName = Session["ProductTypeName"];
}

<link href="~/Asset/css/loadmore.css" rel="stylesheet" />
<style>
    .table_config {
        position: absolute; 
        margin-top: -250px;
        margin-left: 50px; 
        z-index: 100; 
        display: none;
    }
    .quick-view:hover .table_config {
        display: block;
    }
</style>

<!-- NAVIGATION --><!--menu chọn loại-->
<nav id="navigation">
    <!-- container -->
    <div class="container">
        <!-- responsive-nav -->
        <div id="responsive-nav">
            <!-- NAV -->
            <ul class="main-nav nav navbar-nav">
                @if (Session["ProductTypeName"].Equals("SmartPhone"))
                {
                    <li class="active"><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
                else if (Session["ProductTypeName"].Equals("Laptop"))
                {
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li class="active"><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
                else if (Session["ProductTypeName"].Equals("Tablet"))
                {
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li class="active"><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
                else if (Session["ProductTypeName"].Equals("HeadPhone"))
                {
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li class="active"><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
                else if (Session["ProductTypeName"].Equals("SmartWatch"))
                {
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li class="active"><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
                else
                {
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                    <li><a href="@Url.Action("Categories","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
                }
            </ul>
            <!-- /NAV -->
        </div>
        <!-- /responsive-nav -->
    </div>
    <!-- /container -->
</nav>
<!-- /NAVIGATION -->
<!-- BREADCRUMB --><!--Đường dẫn -->
<div id="breadcrumb" class="section" style="padding: 10px 0px">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="@Url.Action("Home","Covid21")">Home</a></li>
                    @if (Session["ProductTypeName"].Equals("SmartPhone"))
                    {
                        <li class="active">Smartphone</li>
                    }
                    else if (Session["ProductTypeName"].Equals("Laptop"))
                    {
                        <li class="active">Laptop</li>
                    }
                    else if (Session["ProductTypeName"].Equals("Tablet"))
                    {
                        <li class="active">Tablet</li>
                    }
                    else if (Session["ProductTypeName"].Equals("HeadPhone"))
                    {
                        <li class="active">HeadPhone</li>
                    }
                    else if (Session["ProductTypeName"].Equals("SmartWatch"))
                    {
                        <li class="active">SmartWatch</li>
                    }
                    else
                    {
                        <li class="active">Your Wishlist</li>
                    }
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->
<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- ASIDE -->
            <div id="aside" class="col-md-3">
                <!--Lọc Thương hiệu-->

                @{
                    var loadBrandProduct = Html.Partial("Categories_LoadBrand", db_Ctrl.loadBrandCtrl(ProductTypeName.ToString()));
                    loadBrandProduct = new MvcHtmlString(loadBrandProduct.ToString());
                }
                @loadBrandProduct

                <!--Lọc Thương hiệu-->
                <!-- aside Widget --><!--Lọc giá-->
                <div class="aside">
                    <h3 class="aside-title">Price</h3>
                    <div class="checkbox-filter">

                        <div class="input-checkbox">
                            <input type="checkbox" id="Price-1">
                            <label for="Price-1">
                                <span></span>
                                All
                            </label>
                        </div>

                        <div class="input-checkbox">
                            <input type="checkbox" id="Price-2">
                            <label for="Price-2">
                                <span></span>
                                0 - $5
                            </label>
                        </div>

                        <div class="input-checkbox">
                            <input type="checkbox" id="Price-3">
                            <label for="Price-3">
                                <span></span>
                                $10 - $20

                            </label>
                        </div>

                        <div class="input-checkbox">
                            <input type="checkbox" id="Price-4">
                            <label for="Price-4">
                                <span></span>
                                $150 - $200
                            </label>
                        </div>

                        <div class="input-checkbox">
                            <input type="checkbox" id="Price-5">
                            <label for="Price-5">
                                <span></span>
                                $250 - $500
                            </label>
                        </div>
                    </div>
                </div>
                <!-- /aside Widget -->
                <!-- aside Widget --><!--Sản Phẩm Bán Được Nhiều nhất-->

                @{
                    var loadProductTop = Html.Partial("Categories_LoadProductTop", db.loadProductTop_Product(1, 5));
                    loadProductTop = new MvcHtmlString(loadProductTop.ToString());
                }
                @loadProductTop

                <!-- /aside Widget -->
            </div>
            <!-- /ASIDE -->
            <!-- STORE -->
            <div id="store" class="col-md-9">
                <!-- store top filter --> <!--Chỉnh Số Lượng Load-->
                <div class="store-filter clearfix">
                    <div class="store-sort">
                        <label>
                            Sort By:
                            <select class="input-select">
                                <option value="0">low to high</option>
                                <option value="1">high to low</option>
                            </select>
                        </label>

                        <label>
                            Show:
                            <select class="input-select">
                                <option value="0">20</option>
                                <option value="1">40</option>
                                <option value="2">60</option>
                            </select>
                        </label>
                    </div>
                </div>
                <!-- /store top filter -->
                <!-- store products --> <!--Show sản phẩm và giảm giá-->
                <div class="row">
                    <!-- product -->

                    @foreach (var item in Model)
                    {
                        <div class="col-md-4 col-xs-6" style="display: none">
                            <div class="product">
                                <div class="product-img">
                                    <a href="@Url.Action("Product","Covid21",new { productId = item.ProductId})">
                                        <img src="~/@item.MainPic" alt="" style="width: 263px; height: 263px; object-fit: contain">
                                    </a>
                                    <div class="product-label">
                                        <span class="new">NEW</span>
                                    </div>
                                </div>

                                <div class="product-body" style="z-index: 5">
                                    <p class="product-category">Category</p>
                                    <h3 class="product-name"><a href="@Url.Action("Product","Covid21",new { productId = item.ProductId})">@item.ProductName</a></h3>
                                    @{
                                        var temp = String.Format("{0:#,##0.##}", @item.ProductPrice);
                                    }
                                    <h4 class="product-price">@temp</h4>

                                    <!-- rating product-->
                                    @Html.Partial("Public_RatingProduct", db_Ctrl.loadRatingProduct(item.ProductId))

                                    <div class="product-btns">
                                        <button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
                                        <button class="quick-view" style=" display: inline-block">
                                            <i class="fa fa-eye"></i><span class="tooltipp">quick view</span>
                                            <div class="table_config" style="color: black; z-index: 100">
                                                @Html.Partial("Categories_TableConfig", item.ProductConfig)
                                            </div>
                                        </button>
                                    </div>
                                </div>
                                <div class="add-to-cart">
                                    <button class="add-to-cart-btn" onclick="addToCart(@item.ProductId)"><i class="fa fa-shopping-cart"></i> add to cart</button>
                                </div>
                            </div>
                            
                        </div>
                    }

                    <!-- /product -->

                </div>
                <button class="loadMore">Load More</button>
                <!-- /store products -->
                <!-- store bottom filter --> <!--trang hiển thị-->
                <!--<div class="store-filter clearfix">
                    <span class="store-qty">Showing 20-100 products</span>
                    <div style="margin-left: 400px; margin-top: 50px">
                        Html.PagedListPager(Model, page => Url.Action("Categories", new { page }))
                    </div>
                </div>-->
                <!-- /store bottom filter -->
            </div>
            <!-- /STORE -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script src="~/Asset/JS/Loadmore/jquery-latest.min.js"></script>
<!--
    Khi load thành công sản phẩm lên form
    Và ẩn hết tất cả sản phẩm
    Dùng script benen dưới để mở theo số lượng tùy ý
-->
<script>
    $(".col-xs-6").slice(0, 6).show(); //hiện số lượng sản phẩm mặc định

    $(".loadMore").on("click", function () {
        $(".col-xs-6:hidden").slice(0, 6).show(); // số sản phẩm hiện lên sau khi bấm loadmore

        if ($(".col-xs-6:hidden").length == 0) {
            $(".loadMore").fadeOut(); //this will hide
            //button when length is 0
        }
    })
</script>
