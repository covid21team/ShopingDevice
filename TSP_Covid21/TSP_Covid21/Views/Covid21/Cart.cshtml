<!--
    ✔ Load danh sách sản phẩm trong giỏ hàng

    ✔ Xóa sản phẩm trong danh sách giỏ hàng

    ✔ Thay đổi xóa lượng sản phẩm (Chưa lưu vào DB) ➔ Số tiền tự động thay đổi (Nếu số tiền bằng 0 ➔ nút Checkout tự ẩn)

    ✔ Trước mỗi sản phẩm cho nút checkbox để lựa chọn mua hay không

    ✔ Rê chuột vào hình ảnh ➔ tạo ra hình ảnh to hơn

    ✔ Bấm vào hình ảnh hoặc tên ➔ đến form Product

    ✘ Tích hợp Voucher vào lúc chuẩn bị thanh toán

    ✘ Bấm vào Checkout ➔ form checkout (form checkout hiện chưa có)

    ✹ Một số form share
        ➽ Public_Navigation

    ⛱ Form có thể đến
        ➣ Home
        ➣ Product

    ☯ Key Session
        ➛ Session["user"]
-->

@model IEnumerable<TSP_Covid21.Models.ViewModel.ProductViewModel>

@{
    TSP_Covid21.Controllers.ProductController PC = new TSP_Covid21.Controllers.ProductController();
    var user = Session["user"];
}

@Html.Partial("Public_Navigation")
<!-- BREADCRUMB -->
<div id="breadcrumb" class="section" style="padding: 10px 0px">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="@Url.Action("Home","Covid21")">Home</a></li>
                    <li class="active">Your cart</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->
<div class="giohang" id="ajax_cart">
    <div class="cart">
        <table class="cart-table">
            <tr>
                <th class="checkbox_cart"></th>
                <th>Image</th>
                <th>Product</th>
                <th class="edit_width_cart">Price</th>
                <th>Quantity</th>
                <th>Remove</th>
                <th class="edit_width_cart">Total</th>
            </tr>
            @foreach (var item in Model)
            {
                <tr class="product_cart">
                    <td class="checkbox_cart">
                        <input class="checkbox_price_cart" type="checkbox" checked="1">
                    </td>
                    <td>
                        <div class="image_product_cart">
                            <a href="@Url.Action("Product","Covid21",new { productId = item.ProductId})">
                                <img src="~/@item.MainPic">
                            </a>
                            <div class="img_zoom">
                                <img src="~/@item.MainPic" style="width: 300px; height: 300px;">
                            </div>
                        </div>
                    </td>
                    <td class="edit_width_product_name_cart">
                        <a href="@Url.Action("Product","Covid21",new { productId = item.ProductId})">@item.ProductName</a>
                    </td>
                    @{
                        var temp = String.Format("{0:#,##0.##}", @item.ProductPrice);
                    }
                    <td class="edit_width_cart">
                        <label class="product_price_cart" style="font-weight: lighter;">@temp</label>đ
                    </td>
                    <td class="number_car">
                        <input class="number_quantity_cart" type="number" value="@item.ProductAmount" min="1" style="width: 60px">
                    </td>
                    <td class="remove_cart">
                        <button class="remove-product">
                            <a href="@Url.Action("delProduct_Cart","Covid21",new {productId = item.ProductId, user = @user })" style="color: white"><i class="fa fa-trash"></i> Remove</a>
                        </button>
                    </td>
                    @{
                        var temp1 = String.Format("{0:#,##0.##}", @item.ProductPrice * item.ProductAmount);
                    }
                    <td class="edit_width_cart">
                        <label class="product_line_price_cart" style="font-weight: lighter;">@temp1</label>đ
                    </td>
                </tr>
            }
        </table>
    </div>

    @{
        var total = @Model.Sum(t => t.ProductAmount * t.ProductPrice);
        var temp_total = String.Format("{0:#,##0.##}", total);

        var total_tax = total * 0.05;
        var temp_total_tax = String.Format("{0:#,##0.##}", total_tax);

        var total_cart = total + total_tax;
        var temp_total_cart = String.Format("{0:#,##0.##}", total_cart);
    }

    <div class="payment_cart">
        <table class="table_payment">
            <tr>
                <th>Subtotal</th>
                <td class="totals_value" id="subtotal_cart">@temp_total đ</td>
            </tr>
            <tr>
                <th>Tax (5%)</th>
                <td class="totals_value" id="tax_cart">@temp_total_tax đ</td>
            </tr>
            <tr>
                <th>Shippping</th>
                <td class="totals_value" id="shipping_cart">Free Ship</td>
            </tr>
            <tr>
                <th>Grand Total</th>
                <td class="totals_value" id="total_cart">@temp_total_cart đ</td>
            </tr>
        </table>
        <div style="margin-top: 20px; float: right;">
            <button class="checkout_cart"><i class="fas fa-hand-holding-usd"></i> Checkout</button>
        </div>
    </div>
</div>
<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->
