@model IEnumerable<TSP_Covid21.Models.ViewModel.ProductViewModel>

@{ 
    TSP_Covid21.Controllers.ProductController PC = new TSP_Covid21.Controllers.ProductController();
    var user = Session["user"];
}
<!-- NAVIGATION -->
<nav id="navigation">
    <!-- container -->
    <div class="container">
        <!-- responsive-nav -->
        <div id="responsive-nav">
            <!-- NAV -->
            <ul class="main-nav nav navbar-nav">
                <li><a href="@Url.Action("Product","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                <li><a href="@Url.Action("Product","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                <li><a href="@Url.Action("Product","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                <li><a href="@Url.Action("Product","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                <li><a href="@Url.Action("Product","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
            </ul>
            <!-- /NAV -->
        </div>
        <!-- /responsive-nav -->
    </div>
    <!-- /container -->
</nav>
<!-- /NAVIGATION -->
<!-- BREADCRUMB -->
<div id="breadcrumb" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="@Url.Action("Home","Covid21")">Home</a></li>
                    <li class="active">Your cart</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->
<div class="giohang" id="ajax_cart">
    <div class="cart">
        <table class="cart-table">
            <tr>
                <th class="checkbox_cart"></th>
                <th>Image</th>
                <th>Product</th>
                <th class="edit_width_cart">Price</th>
                <th>Quantity</th>
                <th>Remove</th>
                <th class="edit_width_cart">Total</th>
            </tr>
            @foreach (var item in Model)
            {
                <tr class="product_cart">
                    <td class="checkbox_cart">
                        <input class="checkbox_price_cart" type="checkbox" checked="1">
                    </td>
                    <td>
                        <div class="image_product_cart">
                            <img src="~/@item.MainPic">
                            <div class="img_zoom">
                                <img src="~/@item.MainPic" style="width: 300px; height: 300px;">
                            </div>
                        </div>
                    </td>
                    <td class="edit_width_product_name_cart">
                        @item.ProductName
                    </td>
                    @{
                        var temp = String.Format("{0:#,##0.##}", @item.ProductPrice);
                    }
                    <td class="edit_width_cart">
                        <label class="product_price_cart" style="font-weight: lighter;">@temp</label>đ
                    </td>
                    <td class="number_car">
                        <input class="number_quantity_cart" type="number" value="@item.ProductAmount" min="1" style="width: 60px">
                    </td>
                    <td class="remove_cart">
                        <button class="remove-product">
                            <a href="@Url.Action("delProduct_Cart","Covid21",new {productId = item.ProductId, user = @user })"><i class="fa fa-trash"></i> Remove</a>
                        </button>
                    </td>
                    @{
                        var temp1 = String.Format("{0:#,##0.##}", @item.ProductPrice * item.ProductAmount);
                    }
                    <td class="edit_width_cart">
                        <label class="product_line_price_cart" style="font-weight: lighter;">@temp1</label>đ
                    </td>
                </tr>
            }
        </table>
    </div>

    @{
        var total = @Model.Sum(t => t.ProductAmount * t.ProductPrice);
        var temp_total = String.Format("{0:#,##0.##}", total);

        var total_tax = total * 0.05;
        var temp_total_tax = String.Format("{0:#,##0.##}", total_tax);

        var total_cart = total + total_tax;
        var temp_total_cart = String.Format("{0:#,##0.##}", total_cart);
    }

    <div class="payment_cart">
        <table class="table_payment">
            <tr>
                <th>Subtotal</th>
                <td class="totals_value" id="subtotal_cart">@temp_total đ</td>
            </tr>
            <tr>
                <th>Tax (5%)</th>
                <td class="totals_value" id="tax_cart">@temp_total_tax đ</td>
            </tr>
            <tr>
                <th>Shippping</th>
                <td class="totals_value" id="shipping_cart">Free Ship</td>
            </tr>
            <tr>
                <th>Grand Total</th>
                <td class="totals_value" id="total_cart">@temp_total_cart đ</td>
            </tr>
        </table>
        <div style="margin-top: 20px; float: right;">
            <button class="checkout_cart"><i class="fas fa-hand-holding-usd"></i> Checkout</button>
        </div>
    </div>
</div>
<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->


<script>
    function onClick(productId, user) {
        $.ajax({
            type: "GET",
            data: {
                productId: productId,
                user: user,
            },
            url: '@Url.Content("delProduct_Cart")',
        });
    }
</script>