@model TSP_Covid21.Models.ShopEntity.PRODUCT
@using PagedList.Mvc;

@{
    ViewBag.Title = "Product";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    TSP_Covid21.Controllers.ProductController PC = new TSP_Covid21.Controllers.ProductController();
}

<!-- NAVIGATION -->
<nav id="navigation">
    <!-- container -->
    <div class="container">
        <!-- responsive-nav -->
        <div id="responsive-nav">
            <!-- NAV -->
            <ul class="main-nav nav navbar-nav">
                <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "SmartPhone" })"><i class="fa fa-mobile-phone"></i> SmarPhone</a></li>
                <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "Laptop" })"><i class="fa fa-laptop"></i> Laptop</a></li>
                <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "Tablet" })"><i class="fa fa-tablet"></i> Tablet</a></li>
                <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "HeadPhone" })"><i class="fa fa-headphones"></i> Headphone</a></li>
                <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "SmartWatch" })"><i class="fa fa-clock-o"></i> Smartwatch</a></li>
            </ul>
            <!-- /NAV -->
        </div>
        <!-- /responsive-nav -->
    </div>
    <!-- /container -->
</nav>
<!-- /NAVIGATION -->
<!-- BREADCRUMB --><!--đường dẫn--><!--chú ý coi nha-->
<div id="breadcrumb" class="section" style="padding: 10px 0px">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="@Url.Action("Home","Covid21")">Home</a></li>
                    @if (Model.PRODUCTTYPE.PRODUCTTYPENAME.Equals("SmartPhone"))
                    {
                        <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "SmartPhone" })">SmartPhone</a></li>
                    }
                    @if (Model.PRODUCTTYPE.PRODUCTTYPENAME.Equals("Laptop"))
                    {
                        <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "Laptop" })">Laptop</a></li>
                    }
                    @if (Model.PRODUCTTYPE.PRODUCTTYPENAME.Equals("Tablet"))
                    {
                        <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "Tablet" })">Tablet</a></li>
                    }
                    @if (Model.PRODUCTTYPE.PRODUCTTYPENAME.Equals("SmartWatch"))
                    {
                        <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "SmartWatch" })">SmartWatch</a></li>
                    }
                    @if (Model.PRODUCTTYPE.PRODUCTTYPENAME.Equals("HeadPhone"))
                    {
                        <li><a href="@Url.Action("Store","Covid21", new { ProductTypeName = "HeadPhone" })">HeadPhone</a></li>
                    }
                    <li class="active">@Model.BRAND.BRANDNAME</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->
<!-- SECTION --> <!--xem sản phẩm-->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- Product main img -->
            <div class="col-md-5 col-md-push-2">
                <div id="product-main-img">

                    <!--Nếu được thì tạo thêm 1 bảng hình dành cho sản phẩm để có thể tự động load, không cần xét từng bức-->

                    <div class="product-preview">
                        <img src="~/@Model.MAINPIC" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC1" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC2" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC3" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC4" alt="">
                    </div>
                </div>
            </div>
            <!-- /Product main img -->
            <!-- Product thumb imgs -->
            <div class="col-md-2  col-md-pull-5">
                <div id="product-imgs">
                    <div class="product-preview">
                        <img src="~/@Model.MAINPIC" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC1" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC2" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC3" alt="">
                    </div>

                    <div class="product-preview">
                        <img src="~/@Model.PIC4" alt="">
                    </div>
                </div>
            </div>
            <!-- /Product thumb imgs -->
            <!-- Product details -->
            <div class="col-md-5">
                <div class="product-details">
                    <h2 class="product-name">@Model.PRODUCTNAME</h2>

                    <!--Rating of product-->
                    @Html.Partial("ratingProduct", PC.loadRatingProduct(Model.PRODUCTID))

                    <div>
                        @{
                            var temp = String.Format("{0:#,##0.##}", Model.PRODUCTPRICE);
                        }
                        <h3 class="product-price">@temp đ</h3>
                        <span class="product-available">In Stock</span>
                    </div>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

                    <div class="add-to-cart">
                        <div class="qty-label">
                            Qty
                            <div class="input-number">
                                <input type="number" value="1" min="1">
                                <span class="qty-up">+</span>
                                <span class="qty-down">-</span>
                            </div>
                        </div>
                        <button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
                    </div>

                    <ul class="product-btns">
                        <li><a href="#"><i class="fa fa-heart-o"></i> add to wishlist</a></li>
                    </ul>

                    <ul class="product-links">
                        <li>Category:</li>
                        <li><a href="#">Headphones</a></li>
                        <li><a href="#">Accessories</a></li>
                    </ul>

                    <ul class="product-links">
                        <li>Share:</li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                        <li><a href="#"><i class="fa fa-envelope"></i></a></li>
                    </ul>

                </div>
            </div>
            <!-- /Product details -->
            <!--Source load rating of product-->
            <!--
            @{
                IEnumerable<TSP_Covid21.Models.ShopEntity.RATINGPRODUCT> listRating = PC.loadRatingProduct(Model.PRODUCTID);

                var sumRating = listRating.Sum(p => p.RATE);
                var countTotal = listRating.Count();
                var countRating_1 = listRating.Count(p => p.RATE < 2 && p.RATE >= 1);
                var countRating_2 = listRating.Count(p => p.RATE < 3 && p.RATE >= 2);
                var countRating_3 = listRating.Count(p => p.RATE < 4 && p.RATE >= 3);
                var countRating_4 = listRating.Count(p => p.RATE < 5 && p.RATE >= 4);
                var countRating_5 = listRating.Count(p => p.RATE == 5);

                float ratioRating = float.Parse(String.Format("{0:0.0}", (sumRating / countTotal)));

                float ratioRating_1 = (countRating_1 / (float)countTotal) * 100;
                float ratioRating_2 = (countRating_2 / (float)countTotal) * 100;
                float ratioRating_3 = (countRating_3 / (float)countTotal) * 100;
                float ratioRating_4 = (countRating_4 / (float)countTotal) * 100;
                float ratioRating_5 = (countRating_5 / (float)countTotal) * 100;

            }
            -->
            <!-- Product tab -->
            <div class="col-md-12">
                <div id="product-tab">
                    <!-- product tab nav -->
                    <ul class="tab-nav">
                        <li class="active"><a data-toggle="tab" href="#tab1">Description</a></li>
                        <li><a data-toggle="tab" href="#tab2">Details</a></li>
                        <li><a data-toggle="tab" href="#tab3">Reviews (@countTotal)</a></li>
                    </ul>
                    <!-- /product tab nav -->
                    <!-- product tab content -->
                    <div class="tab-content">
                        <!-- tab1  -->
                        <div id="tab1" class="tab-pane fade in active">
                            <div class="row">
                                <div class="col-md-12">
                                    <p>
                                        @Model.DECRIPTION
                                    </p>
                                </div>
                            </div>
                        </div>
                        <!-- /tab1  -->
                        <!-- tab2  -->
                        <!--table Config Product-->
                        @Html.Partial("tableConfig_Product", PC.loadConfigProduct(Model.PRODUCTID))

                        <!-- /tab2  -->
                        <!-- tab3  -->
                        <div id="tab3" class="tab-pane fade in">
                            <div class="row">
                                <!-- Rating -->

                                <div class="col-md-3">
                                    <div id="rating">
                                        <div class="rating-avg">
                                            <span>@ratioRating</span>
                                            <div class="rating-stars">
                                                @Html.Partial("ReviewRatingOfUser_Product", ratioRating)
                                            </div>
                                        </div>
                                        <ul class="rating">
                                            <li>
                                                <div class="rating-stars">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </div>
                                                <div class="rating-progress">
                                                    <div style="width: @ratioRating_5%;"></div>
                                                </div>
                                                <span class="sum">@countRating_5</span>
                                            </li>
                                            <li>
                                                <div class="rating-stars">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star-o"></i>
                                                </div>
                                                <div class="rating-progress">
                                                    <div style="width: @ratioRating_4%;"></div>
                                                </div>
                                                <span class="sum">@countRating_4</span>
                                            </li>
                                            <li>
                                                <div class="rating-stars">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                </div>
                                                <div class="rating-progress">
                                                    <div style="width: @ratioRating_3%;"></div>
                                                </div>
                                                <span class="sum">@countRating_3</span>
                                            </li>
                                            <li>
                                                <div class="rating-stars">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                </div>
                                                <div class="rating-progress">
                                                    <div style="width: @ratioRating_2%;"></div>
                                                </div>
                                                <span class="sum">@countRating_2</span>
                                            </li>
                                            <li>
                                                <div class="rating-stars">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                    <i class="fa fa-star-o"></i>
                                                </div>
                                                <div class="rating-progress">
                                                    <div style="width: @ratioRating_1%;"></div>
                                                </div>
                                                <span class="sum">@countRating_1</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- /Rating -->
                                <!-- Reviews -->
                                <!-- Review Product -->
                                <!--Html.Partial("Review_Product", PC.loadCommentProduct(Model.PRODUCTID))-->
                                @{
                                    PagedList.IPagedList<TSP_Covid21.Models.ShopEntity.COMMENT> listComment = PC.loadCommentProduct(Model.PRODUCTID);

                                }
                                <div class="col-md-6">
                                    <div id="reviews">
                                        <ul class="reviews">

                                            @foreach (var item in listComment)
                                            {
                                                <li>
                                                    <div class="review-heading">
                                                        <h5 class="name">@item.ACCOUNT.FULLNAME</h5>
                                                        <p class="date">@item.DATECOMMENT</p>
                                                        <div class="review-rating">

                                                            <!--Review rating of user-->
                                                            @Html.Partial("ReviewRatingOfUser_Product", PC.ReviewRatingOfUser(item.USER, Convert.ToInt32(item.PRODUCTID)))

                                                        </div>
                                                    </div>
                                                    <div class="review-body">
                                                        <p>@item.COMMENTTEXT</p>
                                                    </div>
                                                </li>
                                            }

                                        </ul>
                                        <ul class="reviews-pagination">
                                            @Html.PagedListPager(listComment, page => Url.Action("Product", new { page }))
                                        </ul>
                                    </div>
                                </div>


                                <!-- /Reviews -->
                                <!-- Review Form -->
                                <div class="col-md-3">
                                    <div id="review-form">
                                        <form class="review-form">
                                            <input class="input" type="text" placeholder="Your Name">
                                            <input class="input" type="email" placeholder="Your Email">
                                            <textarea id="comment_Product" class="input" placeholder="Your Review"></textarea>
                                            <div class="input-rating">
                                                <span>Your Rating: </span>
                                                <div class="stars">
                                                    <input id="star5" name="rating" value="5" type="radio"><label for="star5"></label>
                                                    <input id="star4" name="rating" value="4" type="radio"><label for="star4"></label>
                                                    <input id="star3" name="rating" value="3" type="radio"><label for="star3"></label>
                                                    <input id="star2" name="rating" value="2" type="radio"><label for="star2"></label>
                                                    <input id="star1" name="rating" value="1" type="radio"><label for="star1"></label>
                                                </div>
                                            </div>
                                            @*if (Session["user"] == null)
                                            {
                                                <button type="button" class="primary-btn" id="btn_NoLogin">Submit</button>
                                            }
                                            else
                                            {
                                                <button type="button" class="primary-btn" id="btn_ratingProduct">Submit</button>
                                            }*@
                                            <button type="button" class="primary-btn" id="btn_ratingProduct" onclick="tempwwwwwwwwwwww()">Submit</button>
                                        </form>
                                    </div>
                                </div>
                                <!-- /Review Form -->
                                <!-- Function insert sao -->
                            </div>
                        </div>
                        <!-- /tab3  -->
                    </div>
                    <!-- /product tab content  -->
                </div>
            </div>
            <!-- /product tab -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->
<!-- Section --><!--những sản phẩm tương tự-->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">

            <div class="col-md-12">
                <div class="section-title text-center">
                    <h3 class="title">Related Products</h3>
                </div>
            </div>

            @{
                int productTypeId = Convert.ToInt32(Model.PRODUCTTYPEID);
                int brandId = Convert.ToInt32(Model.BRANDID);
                IEnumerable<TSP_Covid21.Models.ShopEntity.PRODUCT> listRelated = PC.loadRelatedProduct(productTypeId, brandId);
            }
            @foreach (var item in listRelated)
            {
                <!-- product -->
                <div class="col-md-3 col-xs-6">

                    @Html.Partial("shareProduct", item);

                </div>
                <!-- /product -->
            }

        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /Section -->

@*{
    var User = Session["user"];
}*@

<script>
    var value , Comment;
    function tempwwwwwwwwwwww() {
        value = $("input:radio[name=rating]:checked").val();
        alert(value);
        Comment = $('#comment_Product').text();
        alert(Comment);
        
    }
</script>

<!--
       $("#btn_NoLogin").click(function () {
        alert('Please Login');
        document.getElementById('id01_login').style.display = block;
    });

    Comment = $('#comment_Product').text();
        alert(value);
        $.ajax({
            url: 'Url.Action("insert_RatingAndComment", "Product")',
            type: 'POST',
            async: false,
            cache: false,
            data: {
                productId = Model.PRODUCTTYPEID,
                user = "Syx",
                rate = value,
                comment = Comment,
            },
            success: function (data) {
                alert('Success');
            },
            error: function (request, status, error) {
                alert('Fail');
            }
        });-->
